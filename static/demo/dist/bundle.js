webpackJsonp([0],{157:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(54),r=n(159);e.App=function(){return o.createElement(o.View,null,o.createElement(o.Text,null,"TEST"),o.createElement(r.LookupLscTest,null))}},158:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(164);e.clientConfig=new o.ClientConfig({lookup_domain:"https://told-stack-demo.azurewebsites.net",lookup_route:"api/lookup-lsc",downloadBlob_domain:"https://told-stack-demo.azurewebsites.net",downloadBlob_route:"api/lookup-lsc-download"})},159:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function u(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,u)}l((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,i=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],i=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,a,u,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};Object.defineProperty(e,"__esModule",{value:!0});var a=n(54),u=n(160),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.notifyUpdate=function(){e.setState({isWaitingForUpdate:!1}),setTimeout(e.download,15e3)},e.download=function(){return r(e,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,u.lookupLscDataAccess.readAndUpdate({blobName:"test",containerName:"test"},this.notifyUpdate)];case 1:return t=e.sent(),this.setState({hasStarted:!0,isWaitingForUpdate:!0,obj:t}),[2]}})})},e}return o(e,t),e.prototype.render=function(){return this.state.hasStarted||(this.setState({hasStarted:!0}),setTimeout(this.download)),a.createElement(a.View,null,a.createElement(a.Text,null,"hasStarted: ",""+this.state.hasStarted),a.createElement(a.Text,null,"isWaitingForUpdate: ",""+this.state.isWaitingForUpdate),a.createElement(a.Text,null,JSON.stringify(this.state.obj)))},e}(a.Component);e.LookupLscTest=l},160:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(163),r=n(158);e.lookupLscDataAccess=new o.DataAccess(r.clientConfig)},161:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(54),r=n(157);o.App.initialize(!0,!0),o.UserInterface.setMainView(o.createElement(r.App,null))},162:function(t,e,n){"use strict";function o(t,e,n,o){void 0===e&&(e=1e3),void 0===n&&(n=5),void 0===o&&(o=2);var r=i.length;i.push(0);var u=0,l=function(){t(),i[r]!==a&&++u<n&&(i[r]=setTimeout(function(){l()},e*Math.pow(o,u)))};return l(),r}function r(t){clearTimeout(i[t]),i[t]=a}Object.defineProperty(e,"__esModule",{value:!0});var i=[],a=-1;e.setInterval_exponentialBackoff=o,e.clearInterval_exponentialBackoff=r},163:function(t,e,n){"use strict";function o(t,e){return a(this,void 0,void 0,function(){var n;return u(this,function(o){switch(o.label){case 0:return[4,r(t,e)];case 1:return n=o.sent().data,[2,n]}})})}function r(t,e){return a(this,void 0,void 0,function(){var n,o,r,i;return u(this,function(a){switch(a.label){case 0:return[4,l.default(t.getLookupUrl(e))];case 1:return n=a.sent(),[4,n.json()];case 2:return o=a.sent(),[4,l.default(t.getDataDownloadUrl(e,o))];case 3:return r=a.sent(),[4,r.json()];case 4:return i=a.sent(),[2,{data:i,lookup:o}]}})})}function i(t,e,n){return a(this,void 0,void 0,function(){var o,i,c,f,p=this;return u(this,function(d){switch(d.label){case 0:return[4,r(t,e)];case 1:return o=d.sent(),i=o.data,c=o.lookup,n&&(f=s.setInterval_exponentialBackoff(function(){return a(p,void 0,void 0,function(){var o,r;return u(this,function(i){switch(i.label){case 0:return[4,l.default(t.getLookupUrl(e))];case 1:return o=i.sent(),[4,o.json()];case 2:return r=i.sent(),JSON.stringify(r)!==JSON.stringify(c)&&(s.clearInterval_exponentialBackoff(f),n()),[2]}})})},1e3*t.timePollSeconds,t.maxPollCount)),[2,i]}})})}var a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function u(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,u)}l((o=o.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,i=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],i=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,a,u,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};Object.defineProperty(e,"__esModule",{value:!0});var l=n(406),s=n(162),c=function(){function t(t){this.config=t}return t.prototype.read=function(t){return a(this,void 0,void 0,function(){return u(this,function(e){return[2,o(this.config,t)]})})},t.prototype.readAndUpdate=function(t,e){return a(this,void 0,void 0,function(){return u(this,function(n){return[2,i(this.config,t,e)]})})},t}();e.DataAccess=c,e.readAppBlob=o,e.readAppBlob_inner=r,e.readAppBlobAndUpdate=i},164:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.timePollSeconds=1,this.maxPollCount=5,this.lookup_domain="/",this.lookup_route="api/lookup-lsc",this.downloadBlob_domain="/",this.downloadBlob_route="blob",this.shouldGzipDownloadBlob=!1,Object.assign(this,t)}return t.prototype.getLookupUrl=function(t){return this.lookup_domain+"/"+this.lookup_route+"/"+t.containerName+"/"+t.blobName},t.prototype.getDataDownloadUrl=function(t,e){return this.downloadBlob_domain+"/"+(this.downloadBlob_route?this.downloadBlob_route+"/":"")+t.containerName+"/"+this.getDataDownloadBlobName(t.blobName,e)},t.prototype.getDataDownloadBlobName=function(t,e){return t+"/"+e.timeKey+(this.shouldGzipDownloadBlob?"_gzip":"")},t}();e.ClientConfig=o},409:function(t,e){}},[161]);
//# sourceMappingURL=bundle.js.map