webpackJsonp([0],{157:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(54),i=n(415);e.App=function(){return o.createElement(o.View,null,o.createElement(o.Text,null,"TEST"),o.createElement(i.LoggerTest,null))}},158:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(166);e.clientConfig=new o.ClientConfig({lookup_domain:"https://told-stack-demo.azureedge.net",downloadBlob_domain:"https://told-stack-demo.azureedge.net",lookup_route:"api/lookup-lsc",downloadBlob_route:"api/lookup-lsc-download"})},161:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(158);e.clientConfig_lookupLsc=o.clientConfig;var i=n(412);e.clientConfig_logger=i.clientConfig},162:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(54),i=n(157);o.App.initialize(!0,!0),o.UserInterface.setMainView(o.createElement(i.App,null))},163:function(t,e,n){"use strict";function o(t,e){return t.reduce(function(t,n){var o=e(n);return(t[o]=t[o]||{items:[]}).items.push(n),t},{})}function i(t,e){var n=o(t,e);return Object.getOwnPropertyNames(n).map(function(t){return n[t].items})}function r(t,e){for(var n in e)t[n]=e[n];return t}Object.defineProperty(e,"__esModule",{value:!0}),e.group=o,e.groupToArray=i,e.assignPartial=r},166:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(163),i=function(){function t(t){this.timePollSeconds=1,this.maxPollCount=5,this.timeToLiveSeconds=60,this.lookup_domain="/",this.lookup_route="api/lookup-lsc",this.downloadBlob_domain="/",this.downloadBlob_route="blob",this.shouldGzipDownloadBlob=!1,o.assignPartial(this,t)}return t.prototype.getLookupUrl=function(t){return this.lookup_domain+"/"+this.lookup_route+"/"+t.containerName+"/"+t.blobName},t.prototype.getDataDownloadUrl=function(t,e){return this.downloadBlob_domain+"/"+(this.downloadBlob_route?this.downloadBlob_route+"/":"")+t.containerName+"/"+this.getDataDownloadBlobName(t.blobName,e)},t.prototype.getDataDownloadBlobName=function(t,e){return t+"/"+e.timeKey+(this.shouldGzipDownloadBlob?"_gzip":"")},t}();e.ClientConfig=i},412:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(413);e.clientConfig=new o.ClientConfig({timeBatchSeconds:10,sendLog_domain:"https://told-stack-demo.azureedge.net",sendLog_route:"api/logger/send-log"})},413:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(163),i=function(){function t(t){var e=this;this.maxSendSize=32768,this.maxDataSize=28672,this.sendLog_domain="/",this.sendLog_route="api/logger/send-log",this.getSendLogUrl=function(){return e.sendLog_domain+"/"+e.sendLog_route},o.assignPartial(this,t)}return t}();e.ClientConfig=i},415:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(54),r=n(416),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){return i.createElement(i.View,null,i.createElement(i.TextInput,{onBlur:function(t){return r.logger.log("TestTextInput","onBlur",{value:t.target.value},!0)},onChangeText:function(t){return r.logger.log("TestTextInput","onChangeText",{value:t})}}),i.createElement(i.Button,{onPress:function(){return r.logger.log("TestButton","onPress",null,!0)},onBlur:function(){return r.logger.log("TestButton","onBlur",null)},onHoverStart:function(){return r.logger.log("TestButton","onHoverStart",null)},onHoverEnd:function(){return r.logger.log("TestButton","onHoverEnd",null)},onLongPress:function(){return r.logger.log("TestButton","onLongPress",null)}},"Click Me"))},e}(i.Component);e.LoggerTest=s},416:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(417),i=n(161);e.logger=new o.Logger(i.clientConfig_logger,function(){return{sessionId:"s1234",userId:"u1234"}},function(){return{path:"a/b/c"}},function(){return{appVersion:"v1.0",platform:"web",userAgent:"testUserAgent"}})},417:function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function u(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}a((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(s=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){a.label=n[1];break}if(6===n[0]&&a.label<s[1]){a.label=s[1],s=n;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(n);break}s[2]&&a.ops.pop(),a.trys.pop();continue}n=e.call(t,a)}catch(t){n=[6,t],r=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,r,s,u,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,o){var i=this;this.config=t,this.getUserInfo=e,this.getContextInfo=n,this.getDeviceInfo=o,this._hasSentSessionInfo=!1,this._startTime=Date.now(),this._lastSendTime=Date.now(),this._items=[],this._timeoutId=0,this.sendBatch=function(t){if(void 0===t&&(t=!1),!t&&Date.now()-i._lastSendTime<1e3*i.config.timeBatchSeconds)return void i.scheduleSend();var e=i._items;i._items=[],i.sendNow(e)},this.scheduleSend=function(){var t=Date.now()-i._lastSendTime,e=i.config.timeBatchSeconds-t;clearTimeout(i._timeoutId),i._timeoutId=setTimeout(i.sendBatch,e)},setTimeout(function(){return i.sendSessionInfo()},250)}return t.prototype.sendSessionInfo=function(){this._hasSentSessionInfo||(this._hasSentSessionInfo=!0,this._items.push({category:"Session",event:"Info",data:null,userInfo:this.getUserInfo(),appContextInfo:this.getContextInfo(),deviceInfo:this.getDeviceInfo(),isError:void 0,time:Date.now(),runTime:Date.now()-this._startTime,startTime:this._startTime}),this.sendBatch(!0))},t.prototype.error=function(t,e,n,o){void 0===o&&(o=!1),this.log(t,e,n,!0,!0)},t.prototype.major=function(t,e,n,o){void 0===o&&(o=!1),this.log(t,e,n,!0)},t.prototype.log=function(t,e,n,o,i){void 0===o&&(o=!1),void 0===i&&(i=!1);var r={category:t,event:e,data:n,userInfo:this.getUserInfo(),appContextInfo:this.getContextInfo(),deviceInfo:void 0,isError:i,time:Date.now(),runTime:Date.now()-this._startTime,startTime:this._startTime};this._items.push(r),this.sendBatch(o)},t.prototype.sendNow=function(t){return o(this,void 0,void 0,function(){var e,n,o,r,s,u,a,l=this;return i(this,function(i){switch(i.label){case 0:if(this._lastSendTime=Date.now(),!t||!t.length)return[2];for(t.forEach(function(t){if(t.data){var e=t.data;"string"!=typeof t.data&&(e=JSON.stringify(t.data)),e.length>l.config.maxDataSize&&(t.data="truncated:"+e.substr(0,l.config.maxDataSize-16)+"...")}}),e=t,n=JSON.stringify(t),o=!0,r=t.length;n.length>this.config.maxSendSize;){if(1===r){e.forEach(function(t){return t.data="truncated:"+JSON.stringify(t.data).substr(0,l.config.maxDataSize)+"..."});break}o=!1,r=Math.floor(r/2),e=t.slice(0,r),n=JSON.stringify(e)}return o||(u=this._items).push.apply(u,t.slice(r)),[4,fetch(this.config.getSendLogUrl(),{method:"POST",body:n})];case 1:return s=i.sent(),s.ok||(e.forEach(function(t){return t._attempts++}),(a=this._items).push.apply(a,e.filter(function(t){return t._attempts<l.config.maxItemSendAttempts}))),o||setTimeout(function(){return l.sendBatch(!0)}),[2]}})})},t}();e.Logger=r}},[162]);
//# sourceMappingURL=bundle.js.map