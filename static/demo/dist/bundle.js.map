{"version":3,"sources":["webpack:///bundle.js","webpack:///./src/app/app.tsx","webpack:///./../config/src/lookup-lsc/client.ts","webpack:///./src/config.ts","webpack:///./src/index.tsx","webpack:///./../../../told-stack-npm/src/core/utils/objects.ts","webpack:///./../../../told-stack-npm/src/data-patterns/lookup-lsc/src-config/client-config.ts","webpack:///./../config/src/core/logger-client.ts","webpack:///./../../../told-stack-npm/src/core/logger/config/client-config.ts","webpack:///./src/app/components/logger-test.tsx","webpack:///./src/app/server-access/logger.ts","webpack:///./../../../told-stack-npm/src/core/logger/client/logger.ts"],"names":["webpackJsonp","157","module","exports","__webpack_require__","Object","defineProperty","value","RX","logger_test_1","App","createElement","View","Text","LoggerTest","158","client_config_1","clientConfig","ClientConfig","lookup_domain","downloadBlob_domain","lookup_route","downloadBlob_route","161","client_1","clientConfig_lookupLsc","logger_client_1","clientConfig_logger","162","app_1","initialize","UserInterface","setMainView","163","group","items","getKey","reduce","o","x","k","push","groupToArray","g","getOwnPropertyNames","map","assignPartial","t","p","166","objects_1","options","this","timePollSeconds","maxPollCount","timeToLiveSeconds","shouldGzipDownloadBlob","prototype","getLookupUrl","key","containerName","blobName","getDataDownloadUrl","lookup","getDataDownloadBlobName","timeKey","412","timeBatchSeconds","sendLog_domain","sendLog_route","413","_this","maxSendSize","maxDataSize","getSendLogUrl","415","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","hasOwnProperty","__","constructor","create","logger_1","_super","apply","arguments","render","TextInput","onBlur","e","logger","log","target","onChangeText","Button","onPress","onHoverStart","onHoverEnd","onLongPress","Component","416","config_1","Logger","sessionId","userId","path","appVersion","platform","userAgent","417","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","verb","n","v","op","f","TypeError","_","y","call","label","ops","pop","trys","length","sent","throw","return","Symbol","iterator","config","getUserInfo","getContextInfo","getDeviceInfo","_hasSentSessionInfo","_startTime","Date","now","_lastSendTime","_items","_timeoutId","sendBatch","shouldSendImmediately","scheduleSend","sendNow","timeUsed","timeRemaining","clearTimeout","setTimeout","sendSessionInfo","category","event","data","userInfo","appContextInfo","deviceInfo","isError","undefined","time","runTime","startTime","error","major","sentItems","hasSentAll","count","r","_a","_b","_c","forEach","JSON","stringify","substr","Math","floor","slice","fetch","method","ok","_attempts","filter","maxItemSendAttempts"],"mappings":"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","file":"bundle.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 157:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar RX = __webpack_require__(54);\r\nvar logger_test_1 = __webpack_require__(415);\r\n// import { Store } from './store/store';\r\n// import { handleRoute } from \"./routes\";\r\n// import { Root } from \"./components/page/root\";\r\n// const store = Store;\r\n// handleRoute();\r\n// <Root store={store} />\r\nexports.App = function () { return (RX.createElement(RX.View, null,\r\n    RX.createElement(RX.Text, null, \"TEST\"),\r\n    RX.createElement(logger_test_1.LoggerTest, null))); };\r\n\n\n/***/ }),\n\n/***/ 158:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar client_config_1 = __webpack_require__(166);\r\nexports.clientConfig = new client_config_1.ClientConfig({\r\n    // lookup_domain: 'https://told-stack-demo.azurewebsites.net',\r\n    // downloadBlob_domain: 'https://told-stack-demo.azurewebsites.net',\r\n    lookup_domain: 'https://told-stack-demo.azureedge.net',\r\n    downloadBlob_domain: 'https://told-stack-demo.azureedge.net',\r\n    lookup_route: 'api/lookup-lsc',\r\n    downloadBlob_route: 'api/lookup-lsc-download'\r\n});\r\n\n\n/***/ }),\n\n/***/ 161:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar client_1 = __webpack_require__(158);\r\nexports.clientConfig_lookupLsc = client_1.clientConfig;\r\nvar logger_client_1 = __webpack_require__(412);\r\nexports.clientConfig_logger = logger_client_1.clientConfig;\r\n\n\n/***/ }),\n\n/***/ 162:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar RX = __webpack_require__(54);\r\nvar app_1 = __webpack_require__(157);\r\nRX.App.initialize(true, true);\r\nRX.UserInterface.setMainView(RX.createElement(app_1.App, null));\r\n\n\n/***/ }),\n\n/***/ 163:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n// export function objectToValueIterator<T>(obj: { [key: string]: T }): { [key: string]: T } & Iterable<T> {\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//     const o = obj as any;\r\n//     o[Symbol.iterator] = () => {\r\n//         let keys = Object.getOwnPropertyNames(obj);\r\n//         let i = 0;\r\n//         return {\r\n//             next: () => {\r\n//                 const key = keys[i++];\r\n//                 const value = obj[key];\r\n//                 return {\r\n//                     value,\r\n//                     done: i >= keys.length\r\n//                 };\r\n//             }\r\n//         };\r\n//     };\r\n//     return o;\r\n// }\r\n// export function objectToKeyValueIterator<T>(obj: { [key: string]: T }): { [key: string]: T } & Iterable<{ key: string, value: T }> {\r\n//     const o = obj as any;\r\n//     o[Symbol.iterator] = () => {\r\n//         let keys = Object.getOwnPropertyNames(obj);\r\n//         let i = 0;\r\n//         return {\r\n//             next: () => {\r\n//                 const key = keys[i++];\r\n//                 const value = obj[key];\r\n//                 return {\r\n//                     value: { key, value },\r\n//                     done: i >= keys.length\r\n//                 };\r\n//             }\r\n//         };\r\n//     };\r\n//     return o;\r\n// }\r\nfunction group(items, getKey) {\r\n    var g = items.reduce(function (o, x) {\r\n        var k = getKey(x);\r\n        var group = o[k] = o[k] || { items: [] };\r\n        group.items.push(x);\r\n        return o;\r\n    }, {});\r\n    //return objectToValueIterator(g);\r\n    return g;\r\n}\r\nexports.group = group;\r\nfunction groupToArray(items, getKey) {\r\n    var g = group(items, getKey);\r\n    return Object.getOwnPropertyNames(g).map(function (k) { return g[k].items; });\r\n}\r\nexports.groupToArray = groupToArray;\r\nfunction assignPartial(t, p) {\r\n    for (var k in p) {\r\n        t[k] = p[k];\r\n    }\r\n    return t;\r\n}\r\nexports.assignPartial = assignPartial;\r\n\n\n/***/ }),\n\n/***/ 166:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar objects_1 = __webpack_require__(163);\r\nvar ClientConfig = (function () {\r\n    function ClientConfig(options) {\r\n        this.timePollSeconds = 1;\r\n        this.maxPollCount = 5;\r\n        this.timeToLiveSeconds = 60;\r\n        this.lookup_domain = '/';\r\n        this.lookup_route = 'api/lookup-lsc';\r\n        this.downloadBlob_domain = '/';\r\n        this.downloadBlob_route = 'blob';\r\n        // WARNING: Gzip is not working in the 4th step: Reading from .gzip blob with node and sending to client\r\n        // In addition, since using a function instead of proxy, gzip is done automatically by the function\r\n        // So it is not needed, and would only be useful to reduce storage size at the cost of increased processing\r\n        this.shouldGzipDownloadBlob = false;\r\n        objects_1.assignPartial(this, options);\r\n    }\r\n    ClientConfig.prototype.getLookupUrl = function (key) {\r\n        return this.lookup_domain + \"/\" + this.lookup_route + \"/\" + key.containerName + \"/\" + key.blobName;\r\n    };\r\n    ClientConfig.prototype.getDataDownloadUrl = function (key, lookup) {\r\n        return this.downloadBlob_domain + \"/\" + (this.downloadBlob_route ? this.downloadBlob_route + '/' : '') + key.containerName + \"/\" + this.getDataDownloadBlobName(key.blobName, lookup);\r\n    };\r\n    ClientConfig.prototype.getDataDownloadBlobName = function (blobName, lookup) {\r\n        // TODO: Test if works with .ext and switch to underscore if needed\r\n        return blobName + \"/\" + lookup.timeKey + (this.shouldGzipDownloadBlob ? '_gzip' : '');\r\n    };\r\n    return ClientConfig;\r\n}());\r\nexports.ClientConfig = ClientConfig;\r\n\n\n/***/ }),\n\n/***/ 412:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar client_config_1 = __webpack_require__(413);\r\nexports.clientConfig = new client_config_1.ClientConfig({\r\n    timeBatchSeconds: 10,\r\n    //sendLog_domain: 'https://told-stack-demo.azureedge.net',\r\n    sendLog_domain: 'http://localhost:7071',\r\n    sendLog_route: 'api/logger/send-log',\r\n});\r\n\n\n/***/ }),\n\n/***/ 413:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar objects_1 = __webpack_require__(163);\r\nvar ClientConfig = (function () {\r\n    function ClientConfig(options) {\r\n        var _this = this;\r\n        this.maxSendSize = 32 * 1024;\r\n        this.maxDataSize = 28 * 1024;\r\n        this.sendLog_domain = '/';\r\n        this.sendLog_route = 'api/logger/send-log';\r\n        this.getSendLogUrl = function () { return _this.sendLog_domain + \"/\" + _this.sendLog_route; };\r\n        objects_1.assignPartial(this, options);\r\n    }\r\n    return ClientConfig;\r\n}());\r\nexports.ClientConfig = ClientConfig;\r\n\n\n/***/ }),\n\n/***/ 415:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar RX = __webpack_require__(54);\r\nvar logger_1 = __webpack_require__(416);\r\nvar LoggerTest = (function (_super) {\r\n    __extends(LoggerTest, _super);\r\n    function LoggerTest() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    LoggerTest.prototype.render = function () {\r\n        return (RX.createElement(RX.View, null,\r\n            RX.createElement(RX.TextInput, { onBlur: function (e) { return logger_1.logger.log('TestTextInput', 'onBlur', { value: e.target.value }, true); }, onChangeText: function (e) { return logger_1.logger.log('TestTextInput', 'onChangeText', { value: e }); } }),\r\n            RX.createElement(RX.Button, { onPress: function () { return logger_1.logger.log('TestButton', 'onPress', null, true); }, onBlur: function () { return logger_1.logger.log('TestButton', 'onBlur', null); }, onHoverStart: function () { return logger_1.logger.log('TestButton', 'onHoverStart', null); }, onHoverEnd: function () { return logger_1.logger.log('TestButton', 'onHoverEnd', null); }, onLongPress: function () { return logger_1.logger.log('TestButton', 'onLongPress', null); } }, \"Click Me\")));\r\n    };\r\n    return LoggerTest;\r\n}(RX.Component));\r\nexports.LoggerTest = LoggerTest;\r\n\n\n/***/ }),\n\n/***/ 416:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar logger_1 = __webpack_require__(417);\r\nvar config_1 = __webpack_require__(161);\r\nexports.logger = new logger_1.Logger(config_1.clientConfig_logger, function () { return ({ sessionId: 's1234', userId: 'u1234' }); }, function () { return ({ path: 'a/b/c' }); }, function () { return ({ appVersion: 'v1.0', platform: 'web', userAgent: 'testUserAgent' }); });\r\n\n\n/***/ }),\n\n/***/ 417:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Logger = (function () {\r\n    function Logger(config, getUserInfo, getContextInfo, getDeviceInfo) {\r\n        var _this = this;\r\n        this.config = config;\r\n        this.getUserInfo = getUserInfo;\r\n        this.getContextInfo = getContextInfo;\r\n        this.getDeviceInfo = getDeviceInfo;\r\n        this._hasSentSessionInfo = false;\r\n        this._startTime = Date.now();\r\n        this._lastSendTime = Date.now();\r\n        this._items = [];\r\n        this._timeoutId = 0;\r\n        this.sendBatch = function (shouldSendImmediately) {\r\n            if (shouldSendImmediately === void 0) { shouldSendImmediately = false; }\r\n            if (!shouldSendImmediately\r\n                && Date.now() - _this._lastSendTime < _this.config.timeBatchSeconds * 1000) {\r\n                _this.scheduleSend();\r\n                return;\r\n            }\r\n            var items = _this._items;\r\n            _this._items = [];\r\n            _this.sendNow(items);\r\n        };\r\n        this.scheduleSend = function () {\r\n            var timeUsed = Date.now() - _this._lastSendTime;\r\n            var timeRemaining = _this.config.timeBatchSeconds - timeUsed;\r\n            clearTimeout(_this._timeoutId);\r\n            _this._timeoutId = setTimeout(_this.sendBatch, timeRemaining);\r\n        };\r\n        setTimeout(function () { return _this.sendSessionInfo(); }, 250);\r\n    }\r\n    Logger.prototype.sendSessionInfo = function () {\r\n        if (!this._hasSentSessionInfo) {\r\n            this._hasSentSessionInfo = true;\r\n            this._items.push({\r\n                category: 'Session',\r\n                event: 'Info',\r\n                data: null,\r\n                userInfo: this.getUserInfo(),\r\n                appContextInfo: this.getContextInfo(),\r\n                deviceInfo: this.getDeviceInfo(),\r\n                isError: undefined,\r\n                time: Date.now(),\r\n                runTime: Date.now() - this._startTime,\r\n                startTime: this._startTime,\r\n            });\r\n            this.sendBatch(true);\r\n        }\r\n    };\r\n    Logger.prototype.error = function (category, event, data, shouldSendImmediately) {\r\n        if (shouldSendImmediately === void 0) { shouldSendImmediately = false; }\r\n        this.log(category, event, data, true, true);\r\n    };\r\n    Logger.prototype.major = function (category, event, data, shouldSendImmediately) {\r\n        if (shouldSendImmediately === void 0) { shouldSendImmediately = false; }\r\n        this.log(category, event, data, true);\r\n    };\r\n    Logger.prototype.log = function (category, event, data, shouldSendImmediately, isError) {\r\n        if (shouldSendImmediately === void 0) { shouldSendImmediately = false; }\r\n        if (isError === void 0) { isError = false; }\r\n        var d = {\r\n            category: category,\r\n            event: event,\r\n            data: data,\r\n            userInfo: this.getUserInfo(),\r\n            appContextInfo: this.getContextInfo(),\r\n            deviceInfo: undefined,\r\n            isError: isError,\r\n            time: Date.now(),\r\n            runTime: Date.now() - this._startTime,\r\n            startTime: this._startTime,\r\n        };\r\n        this._items.push(d);\r\n        this.sendBatch(shouldSendImmediately);\r\n    };\r\n    Logger.prototype.sendNow = function (items) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            var sentItems, body, hasSentAll, count, r, _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        this._lastSendTime = Date.now();\r\n                        if (!items || !items.length) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        items.forEach(function (x) {\r\n                            if (!x.data) {\r\n                                return;\r\n                            }\r\n                            var d = x.data;\r\n                            if (typeof x.data !== 'string') {\r\n                                d = JSON.stringify(x.data);\r\n                            }\r\n                            if (d.length > _this.config.maxDataSize) {\r\n                                x.data = 'truncated:' + d.substr(0, _this.config.maxDataSize - 16) + '...';\r\n                            }\r\n                        });\r\n                        sentItems = items;\r\n                        body = JSON.stringify(items);\r\n                        hasSentAll = true;\r\n                        count = items.length;\r\n                        while (body.length > this.config.maxSendSize) {\r\n                            if (count === 1) {\r\n                                // Truncate Message Data\r\n                                sentItems.forEach(function (x) { return x.data = 'truncated:' + JSON.stringify(x.data).substr(0, _this.config.maxDataSize) + '...'; });\r\n                                break;\r\n                            }\r\n                            hasSentAll = false;\r\n                            count = Math.floor(count / 2);\r\n                            sentItems = items.slice(0, count);\r\n                            body = JSON.stringify(sentItems);\r\n                        }\r\n                        if (!hasSentAll) {\r\n                            (_a = this._items).push.apply(_a, items.slice(count));\r\n                        }\r\n                        return [4 /*yield*/, fetch(this.config.getSendLogUrl(), { method: 'POST', body: body })];\r\n                    case 1:\r\n                        r = _c.sent();\r\n                        // If send failure, add items back to end of queue to try again\r\n                        if (!r.ok) {\r\n                            sentItems.forEach(function (x) { return x._attempts++; });\r\n                            (_b = this._items).push.apply(_b, sentItems.filter(function (x) { return x._attempts < _this.config.maxItemSendAttempts; }));\r\n                        }\r\n                        // Immediately Send Again to Send the rest of the batch\r\n                        if (!hasSentAll) {\r\n                            setTimeout(function () { return _this.sendBatch(true); });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Logger;\r\n}());\r\nexports.Logger = Logger;\r\n\n\n/***/ })\n\n},[162]);\n\n\n// WEBPACK FOOTER //\n// bundle.js","import * as RX from 'reactxp';\r\nimport { LookupLscTest } from \"./components/lookup-lsc-test\";\r\nimport { LoggerTest } from \"./components/logger-test\";\r\n// import { Store } from './store/store';\r\n// import { handleRoute } from \"./routes\";\r\n// import { Root } from \"./components/page/root\";\r\n\r\n// const store = Store;\r\n\r\n// handleRoute();\r\n\r\n// <Root store={store} />\r\nexport const App = () => (\r\n    <RX.View>\r\n        <RX.Text>TEST</RX.Text>\r\n        {/*<LookupLscTest />*/}\r\n        <LoggerTest />\r\n    </RX.View>\r\n);\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.tsx","import { ClientConfig } from \"@told/stack/src/data-patterns/lookup-lsc/src-config/client-config\";\r\n\r\nexport const clientConfig = new ClientConfig({\r\n    // lookup_domain: 'https://told-stack-demo.azurewebsites.net',\r\n    // downloadBlob_domain: 'https://told-stack-demo.azurewebsites.net',\r\n    lookup_domain: 'https://told-stack-demo.azureedge.net',\r\n    downloadBlob_domain: 'https://told-stack-demo.azureedge.net',\r\n\r\n    lookup_route: 'api/lookup-lsc',\r\n    downloadBlob_route: 'api/lookup-lsc-download'\r\n});\n\n\n// WEBPACK FOOTER //\n// ./../config/src/lookup-lsc/client.ts","export { clientConfig as clientConfig_lookupLsc } from '../../config/src/lookup-lsc/client';\nexport { clientConfig as clientConfig_logger } from '../../config/src/core/logger-client';\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.ts","import * as RX from 'reactxp';\r\nimport { App } from './app/app';\r\n\r\nRX.App.initialize(true, true);\r\nRX.UserInterface.setMainView(<App />);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.tsx","\r\n// export function objectToValueIterator<T>(obj: { [key: string]: T }): { [key: string]: T } & Iterable<T> {\r\n\r\n//     const o = obj as any;\r\n//     o[Symbol.iterator] = () => {\r\n//         let keys = Object.getOwnPropertyNames(obj);\r\n//         let i = 0;\r\n\r\n//         return {\r\n//             next: () => {\r\n//                 const key = keys[i++];\r\n//                 const value = obj[key];\r\n//                 return {\r\n//                     value,\r\n//                     done: i >= keys.length\r\n//                 };\r\n//             }\r\n//         };\r\n//     };\r\n\r\n//     return o;\r\n// }\r\n\r\n\r\n// export function objectToKeyValueIterator<T>(obj: { [key: string]: T }): { [key: string]: T } & Iterable<{ key: string, value: T }> {\r\n\r\n//     const o = obj as any;\r\n//     o[Symbol.iterator] = () => {\r\n//         let keys = Object.getOwnPropertyNames(obj);\r\n//         let i = 0;\r\n\r\n//         return {\r\n//             next: () => {\r\n//                 const key = keys[i++];\r\n//                 const value = obj[key];\r\n//                 return {\r\n//                     value: { key, value },\r\n//                     done: i >= keys.length\r\n//                 };\r\n//             }\r\n//         };\r\n//     };\r\n\r\n//     return o;\r\n// }\r\n\r\nexport function group<T>(items: T[], getKey: (x: T) => string) {\r\n    const g = items.reduce((o, x) => {\r\n        const k = getKey(x);\r\n        const group = o[k] = o[k] || { items: [] };\r\n        group.items.push(x);\r\n        return o;\r\n    }, {} as any) as { [key: string]: { items: T[] } };\r\n\r\n    //return objectToValueIterator(g);\r\n    return g;\r\n}\r\n\r\nexport function groupToArray<T>(items: T[], getKey: (x: T) => string) {\r\n    const g = group(items, getKey);\r\n    return Object.getOwnPropertyNames(g).map(k => g[k].items);\r\n}\r\n\r\n\r\nexport function assignPartial<T>(t: T, p: Partial<T>): T {\r\n    for (let k in p) {\r\n        t[k] = p[k];\r\n    }\r\n\r\n    return t;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./../../../told-stack-npm/src/core/utils/objects.ts","import { HttpFunctionRequest } from \"../../../core/types/functions\";\r\nimport { assignPartial } from \"../../../core/utils/objects\";\r\n\r\nexport interface DataKey {\r\n    containerName: string;\r\n    blobName: string;\r\n}\r\n\r\nexport interface LookupData {\r\n    timeKey: string\r\n}\r\n\r\nexport interface LookupResponse {\r\n    timeKey?: string;\r\n    error?: string;\r\n    timeToExpireSeconds: number;\r\n}\r\n\r\nexport interface ClientConfigType {\r\n    timeToLiveSeconds: number;\r\n    timePollSeconds: number;\r\n    maxPollCount: number;\r\n\r\n    getLookupUrl(key: DataKey): string;\r\n    getDataDownloadUrl(key: DataKey, lookup: LookupData): string;\r\n}\r\n\r\nexport interface ClientConfigOptions {\r\n    timeToLiveSeconds: number;\r\n    timePollSeconds: number;\r\n    maxPollCount: number;\r\n    lookup_domain: string;\r\n    lookup_route: string;\r\n    downloadBlob_domain: string;\r\n    downloadBlob_route: string;\r\n}\r\n\r\nexport class ClientConfig implements ClientConfigType, ClientConfigOptions {\r\n    timePollSeconds = 1;\r\n    maxPollCount = 5;\r\n    timeToLiveSeconds = 60;\r\n\r\n    lookup_domain = '/';\r\n    lookup_route = 'api/lookup-lsc';\r\n    downloadBlob_domain = '/';\r\n    downloadBlob_route = 'blob';\r\n\r\n    // WARNING: Gzip is not working in the 4th step: Reading from .gzip blob with node and sending to client\r\n    // In addition, since using a function instead of proxy, gzip is done automatically by the function\r\n    // So it is not needed, and would only be useful to reduce storage size at the cost of increased processing\r\n    shouldGzipDownloadBlob = false;\r\n\r\n    constructor(options?: Partial<ClientConfigOptions>) {\r\n        assignPartial(this, options);\r\n    }\r\n\r\n    getLookupUrl(key: DataKey): string {\r\n        return `${this.lookup_domain}/${this.lookup_route}/${key.containerName}/${key.blobName}`;\r\n    }\r\n\r\n    getDataDownloadUrl(key: DataKey, lookup: LookupData): string {\r\n        return `${this.downloadBlob_domain}/${this.downloadBlob_route ? this.downloadBlob_route + '/' : ''}${key.containerName}/${this.getDataDownloadBlobName(key.blobName, lookup)}`;\r\n    }\r\n\r\n    getDataDownloadBlobName(blobName: string, lookup: LookupData) {\r\n        // TODO: Test if works with .ext and switch to underscore if needed\r\n        return `${blobName}/${lookup.timeKey}${this.shouldGzipDownloadBlob ? '_gzip' : ''}`;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../../../told-stack-npm/src/data-patterns/lookup-lsc/src-config/client-config.ts","import { ClientConfig } from \"@told/stack/src/core/logger/config/client-config\";\r\n\r\nexport const clientConfig = new ClientConfig({\r\n    timeBatchSeconds: 10,\r\n    //sendLog_domain: 'https://told-stack-demo.azureedge.net',\r\n    sendLog_domain: 'http://localhost:7071',\r\n    sendLog_route: 'api/logger/send-log',\r\n});\n\n\n// WEBPACK FOOTER //\n// ./../config/src/core/logger-client.ts","import { assignPartial } from \"../../utils/objects\";\r\n\r\nexport interface ClientConfigOptions {\r\n    timeBatchSeconds: number;\r\n\r\n    sendLog_domain: string;\r\n    sendLog_route: string;\r\n}\r\n\r\nexport class ClientConfig {\r\n    timeBatchSeconds: 60;\r\n    maxItemSendAttempts: 3;\r\n    maxSendSize = 32 * 1024;\r\n    maxDataSize = 28 * 1024;\r\n\r\n    sendLog_domain = '/';\r\n    sendLog_route = 'api/logger/send-log';\r\n\r\n    constructor(options: Partial<ClientConfigOptions>) {\r\n        assignPartial(this, options);\r\n    }\r\n\r\n    getSendLogUrl = () => `${this.sendLog_domain}/${this.sendLog_route}`;\r\n\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./../../../told-stack-npm/src/core/logger/config/client-config.ts","import * as RX from 'reactxp';\r\nimport { logger } from \"../server-access/logger\";\r\n\r\nexport class LoggerTest extends RX.Component<{}, {\r\n}>{\r\n\r\n    render() {\r\n\r\n        return (\r\n            <RX.View>\r\n                <RX.TextInput\r\n                    onBlur={(e) => logger.log('TestTextInput', 'onBlur', { value: (e.target as any).value }, true)}\r\n                    onChangeText={(e) => logger.log('TestTextInput', 'onChangeText', { value: e })}\r\n                />\r\n                <RX.Button\r\n                    onPress={() => logger.log('TestButton', 'onPress', null, true)}\r\n                    onBlur={() => logger.log('TestButton', 'onBlur', null)}\r\n                    onHoverStart={() => logger.log('TestButton', 'onHoverStart', null)}\r\n                    onHoverEnd={() => logger.log('TestButton', 'onHoverEnd', null)}\r\n                    onLongPress={() => logger.log('TestButton', 'onLongPress', null)}\r\n                >Click Me</RX.Button>\r\n            </RX.View>\r\n        );\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/logger-test.tsx","import { Logger } from '@told/stack/src/core/logger/client/logger';\r\nimport { clientConfig_logger as clientConfig } from '../../config';\r\n\r\nexport const logger = new Logger(clientConfig,\r\n    () => ({ sessionId: 's1234', userId: 'u1234' }),\r\n    () => ({ path: 'a/b/c' }),\r\n    () => ({ appVersion: 'v1.0', platform: 'web', userAgent: 'testUserAgent' }),\r\n);\n\n\n// WEBPACK FOOTER //\n// ./src/app/server-access/logger.ts","import { ClientConfig } from \"../config/client-config\";\r\nimport { UserInfo, AppContextInfo, DeviceInfo, LogItem } from \"../config/types\";\r\n\r\nexport class Logger {\r\n\r\n    private _hasSentSessionInfo = false;\r\n    private _startTime = Date.now();\r\n    private _lastSendTime = Date.now();\r\n\r\n    private _items: LogItem[] = [];\r\n\r\n    private _timeoutId: any = 0;\r\n\r\n    constructor(\r\n        private config: ClientConfig,\r\n        private getUserInfo: () => UserInfo,\r\n        private getContextInfo: () => AppContextInfo,\r\n        private getDeviceInfo: () => DeviceInfo,\r\n    ) {\r\n        setTimeout(() => this.sendSessionInfo(), 250);\r\n    }\r\n\r\n    private sendSessionInfo() {\r\n        if (!this._hasSentSessionInfo) {\r\n            this._hasSentSessionInfo = true;\r\n\r\n            this._items.push({\r\n                category: 'Session',\r\n                event: 'Info',\r\n                data: null,\r\n\r\n                userInfo: this.getUserInfo(),\r\n                appContextInfo: this.getContextInfo(),\r\n                deviceInfo: this.getDeviceInfo(),\r\n\r\n                isError: undefined,\r\n                time: Date.now(),\r\n                runTime: Date.now() - this._startTime,\r\n                startTime: this._startTime,\r\n            });\r\n\r\n            this.sendBatch(true);\r\n        }\r\n    }\r\n\r\n    error(category: string, event: string, data: Object, shouldSendImmediately = false) {\r\n        this.log(category, event, data, true, true);\r\n    }\r\n\r\n    major(category: string, event: string, data: Object, shouldSendImmediately = false) {\r\n        this.log(category, event, data, true);\r\n    }\r\n\r\n    log(category: string, event: string, data: Object, shouldSendImmediately = false, isError = false) {\r\n\r\n        const d: LogItem = {\r\n            category,\r\n            event,\r\n            data,\r\n\r\n            userInfo: this.getUserInfo(),\r\n            appContextInfo: this.getContextInfo(),\r\n            deviceInfo: undefined,\r\n\r\n            isError,\r\n            time: Date.now(),\r\n            runTime: Date.now() - this._startTime,\r\n            startTime: this._startTime,\r\n        };\r\n\r\n        this._items.push(d);\r\n        this.sendBatch(shouldSendImmediately);\r\n\r\n    }\r\n\r\n    private sendBatch = (shouldSendImmediately = false) => {\r\n        if (!shouldSendImmediately\r\n            && Date.now() - this._lastSendTime < this.config.timeBatchSeconds * 1000\r\n        ) {\r\n            this.scheduleSend();\r\n            return;\r\n        }\r\n\r\n        const items = this._items;\r\n        this._items = [];\r\n        this.sendNow(items);\r\n    }\r\n\r\n    private async sendNow(items: LogItem[]) {\r\n        this._lastSendTime = Date.now();\r\n        if (!items || !items.length) { return; }\r\n\r\n        items.forEach(x => {\r\n            if (!x.data) { return; }\r\n\r\n            let d = x.data;\r\n            if (typeof x.data !== 'string') {\r\n                d = JSON.stringify(x.data);\r\n            }\r\n\r\n            if (d.length > this.config.maxDataSize) {\r\n                x.data = 'truncated:' + d.substr(0, this.config.maxDataSize - 16) + '...';\r\n            }\r\n        });\r\n\r\n        let sentItems = items;\r\n        let body = JSON.stringify(items);\r\n\r\n        // If body is too large, break it up\r\n        let hasSentAll = true;\r\n        let count = items.length;\r\n        while (body.length > this.config.maxSendSize) {\r\n            if (count === 1) {\r\n                // Truncate Message Data\r\n                sentItems.forEach(x => x.data = 'truncated:' + JSON.stringify(x.data).substr(0, this.config.maxDataSize) + '...');\r\n                break;\r\n            }\r\n\r\n            hasSentAll = false;\r\n            count = Math.floor(count / 2);\r\n            sentItems = items.slice(0, count);\r\n            body = JSON.stringify(sentItems);\r\n        }\r\n\r\n        if (!hasSentAll) {\r\n            this._items.push(...items.slice(count));\r\n        }\r\n\r\n        const r = await fetch(this.config.getSendLogUrl(), { method: 'POST', body });\r\n\r\n        // If send failure, add items back to end of queue to try again\r\n        if (!r.ok) {\r\n            sentItems.forEach(x => x._attempts++);\r\n            this._items.push(...sentItems.filter(x => x._attempts < this.config.maxItemSendAttempts));\r\n        }\r\n\r\n        // Immediately Send Again to Send the rest of the batch\r\n        if (!hasSentAll) {\r\n            setTimeout(() => this.sendBatch(true));\r\n        }\r\n    }\r\n\r\n    private scheduleSend = () => {\r\n        const timeUsed = Date.now() - this._lastSendTime;\r\n        const timeRemaining = this.config.timeBatchSeconds - timeUsed;\r\n        clearTimeout(this._timeoutId);\r\n        this._timeoutId = setTimeout(this.sendBatch, timeRemaining);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./../../../told-stack-npm/src/core/logger/client/logger.ts"],"sourceRoot":""}